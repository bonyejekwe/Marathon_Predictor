<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="generator" content="pandoc" />
<meta name="viewport" content="width=device-width, initial-scale=1">


<!--
Font-awesome icons ie github or twitter
-->
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css" integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/brands.css" integrity="sha384-n9+6/aSqa9lBidZMRCQHTHKJscPq6NW4pCQBiMmHdUCvPN8ZOg2zJJTkC7WIezWv" crossorigin="anonymous">

<!--
Google fonts api stuff
-->
<link href='https://fonts.googleapis.com/css?family=FF Real' rel='stylesheet'>



<title>Quantifying Uncertainty in Marathon Finish Time Predictions</title>






<style>
@page {
size: 36in 24in;
margin: 0;
padding: 0;
}
body {
margin: 0;
font-size: 40px;
width: 36in;
height: 24in;
padding: 0;
text-align: justify;
font-family: FF Real;
}
.poster_wrap {
width: 36in;
height: 24in;
padding: 0cm;
}
.title_container {
width: 36in;
height: calc(24in * 0.15);
overflow: hidden;
background-color: #A81616;
border: 0.5cm solid #A81616;
}
.logo_left {
float: left;
width: 10%;
height: 100%;
background-color: #A81616;
display: flex;
align-items: center;
justify-content: center;
}
.logo_right {
float: right;
width: 10%;
height: 100%;
background-color: #A81616;
display: flex;
align-items: center;
justify-content: center;
}
.poster_title {
text-align: center;
position: relative;
float: left;
width: 80%;
height: 100%;
color: #FFFFFF;
top: 50%;
transform: translateY(-50%);
-webkit-transform: translateY(-50%);
}
#title {
font-family: FF Real;
}
/* unvisited link */
a:link {
color: #cc0000;
}
.mybreak {
  break-before: column;
}
/* visited link */
a:visited {
color: #cc0000;
}

/* mouse over link */
a:hover {
color: #cc0000;
}

/* selected link */
a:active {
color: #cc0000;
}
.poster_body {
-webkit-column-count: 3; /* Chrome, Safari, Opera */
-moz-column-count: 3; /* Firefox */
column-count: 3;
-webkit-column-fill: auto;
-moz-column-fill: auto;
column-fill: auto;
-webkit-column-rule-width: 1mm;
-moz-column-rule-width: 1mm;
column-rule-width: 1mm;
-webkit-column-rule-style: dashed;
-moz-column-rule-style: dashed;
column-rule-style: dashed;
-webkit-column-rule-color: #A81616;
-moz-column-rule-color: #A81616;
column-rule-color: #A81616;
column-gap: 0.5cm;
padding-left: calc(0.5cm / 2);
padding-right: calc(0.5cm / 2);
height: 100%;
color: #A81616
background-color: #ffffff;
}
.poster_title h1 {
font-size: 60pt;
margin: 0;
border: 0;
font-weight: normal;
}
.poster_body_wrap{
width: calc(36in + 0.5cm + 0.5cm);
height: calc(24in * 0.83);
padding-top: calc(24in * 0.005);
padding-bottom: calc(24in * 0.01);
background-color: #ffffff;
}
.poster_title h3 {
color: #FFFFFF;
font-size: 35pt;
margin: 0;
border: 0;
font-weight: normal;
}
.poster_title h3 > sup {
  font-size: 35pt;
  margin-left: 0.02em;
}
.poster_title h5 {
color: #FFFFFF;
font-size: ;
margin: 0;
border: 0;
font-weight: normal;
}
img {
margin-top: 2cm;
margin-bottom: 0;
}
.section {
  padding: 0.2em;
}
.poster_body h1 {
text-align: center;
color: #FFFFFF;
font-size: 40pt;
border: 2mm solid #A81616;
background-color: #A81616;
border-radius: 4mm 0mm;
margin-top: 2mm;
margin-bottom: 2mm;
font-weight: normal;
}
.poster_body h2 {
color: #000000;
font-size: 40pt;
padding-left: 4mm;
font-weight: normal;
}
.span {
width: 200%;
}
/* center align leaflet map,
from https://stackoverflow.com/questions/52112119/center-leaflet-in-a-rmarkdown-document */
.html-widget {
margin: auto;
position: sticky;
margin-top: 2cm;
margin-bottom: 2cm;
}
.leaflet.html-widget.html-widget-static-bound.leaflet-container.leaflet-touch.leaflet-fade-anim.leaflet-grab.leaflet-touch-drag.leaflet-touch-zoom {
position: sticky;
width: 100%;
}
pre.sourceCode.r {
background-color: #dddddd40;
border-radius: 4mm;
padding: 4mm;
width: 75%;
/* align-items: center; */
margin: auto;
padding-left: 2cm;
}
code.sourceCode.r{
background-color: transparent;
font-size: 20pt;
border-radius: 2mm;
}
.caption {
font-size: 25pt;
}
.table caption {
font-size: 25pt;
padding-bottom: 3mm;

}
code {
font-size: 1em;
font-family: monospace;
background-color: #A8161624;
color: #A81616;
padding: 1.2mm;
border-radius: 2mm;
}
.poster_title code {
font-size: 1em;
}
table {
font-size: 40px;
margin: auto;
border-top: 3px solid #666;
border-bottom: 3px solid #666;
}
table thead th {
border-bottom: 3px solid #ddd;
}
td {
padding: 8px;
}
th {
padding: 15px;
}
caption {
margin-bottom: 10px;
}
.poster_body p {
margin-right: 4mm;
margin-left: 4mm;
margin-top: 6mm;
margin-bottom: 10mm;
}
.poster_body ol {
margin-right: 4mm;
margin-left: 4mm;
}
#ul {
margin-right: 4mm;
margin-left: 4mm;
}
.references p {
font-size: 20pt;
}
.orcid img {
  width: 1em;
}
</style>
</head>
<body>


<div class="poster_wrap">
<div class="title_container">
<!-- Left Logo  -->
<div class="logo_left">
<img src= 'logo.jpg' style="width: 80%">
</div>
<!-- Poster Title -->
<div class= "poster_title">
<h1 id="title">Quantifying Uncertainty in Marathon Finish Time Predictions</h1>
<h3 id="author">Brandon Onyejekwe<sup>1</sup>, Eric Gerber<sup>1</sup></h3><br>
<h5 id="affiliation"><sup></sup> Khoury College of Computer Sciences, Northeastern University</h5>
</div>
<!-- Right Logo  -->
<div class="logo_right">
<img src=QR.png style="width: 80%">
</div>
</div>

<div class='poster_body_wrap'>
<div class='poster_body'>
<div id="introduction" class="section level1">
<h1>Introduction</h1>
<p>In the middle of a marathon, expected finish times are typically estimated by naively extrapolating the average pace covered so far, assuming it will be held constant for the rest of the race. These predictions have two major issues:</p>
<ol style="list-style-type: decimal">
<li>The estimates only use one piece of data (the average pace so far) to predict the finish time</li>
<li>The prediction is a single point estimate with no information about uncertainty.</li>
</ol>
<p>An empirical Bayesian inference model addresses both concerns by using the runner’s previous splits in the race to generate a probability distribution of possible finish times. The posterior finish distribution directly quantifies the uncertainty behind the estimate.</p>
</div>
<div id="data" class="section level1">
<h1>Data</h1>
<p>We scraped Boston Marathon results from the Boston Athletic Association (BAA) website. Our dataset contains the name, age, gender, and splits (5K, 10K, 15K, 20K, HALF, 25K, 30K, 35K, 40K, and FINISH, all in seconds) for every finishing runner of the Boston Marathon from 2009-2023 (312,805 total). We partitioned this data into a training set (286,777 runners from 2009-2022) and a test set (26,028 runners from 2023).</p>
</div>
<div id="model" class="section level1">
<h1>Model</h1>
<p>The model iteratively update the posterior finish time distribution using Bayes Theorem. Using a runner’s splits so far (<span class="math inline">\(s_1\)</span>, …, <span class="math inline">\(s_t\)</span>), the model predicts the finish split <span class="math inline">\(s_f\)</span> according to the following equation <span class="citation">(Gelman 2021)</span>:</p>
<p><span class="math display">\[P(s_f | s_{1:t}) ∝ P(s_t | s_f, s_{1:t-1}) * P(s_f | s_{1:t-1})\]</span></p>
<p>In this equation, the posterior distribution is the normalized product of the likelihood distribution and the prior distribution. Likelihoods are estimated empirically using the training set. We use the posterior mode as a point estimate for the model, but it has the added benefit that the distribution can be used to form credible intervals.</p>
</div>
<div id="results" class="section level1">
<h1>Results</h1>
<p>The Bayesian model greatly outperforms the tradiational method in mean squared error (MSE) on the training set (Fig 1), especially in the middle of the race (when the estimate matters the most). Performance in the Bayes model increases as more splits (and thus, more information) is incorporated into the model.</p>
<p>We found that the Bayesian model has very similar performance to linear regression in terms of test set MSE, but has the additional benefit of having an interpretable posterior distribution, rather than a single point estimate.</p>
<center>
<div class="figure">
<img src="all_errors.png" alt="" />
<p class="caption"><em>Fig.1 - MSE at different stages of the race for each method. The traditional method (yellow) has significantly higher errors compared to the Bayesian posterior modes (red, solid) and linear regression (teal). Bayesian posterior medians (red, dotted) and means (red, dashed) are also shown.</em></p>
</div>
</center>
<p>We found that the Bayesian model has very similar performance to linear regression in terms of test set MSE, but has the additional benefit of having an interpretable posterior distribution, rather than a single point estimate.</p>
<p>From these tables, we are able to plot the posterior distributions at each iteration on a single plot, an example of which is shown below.</p>
<center>
<div class="figure">
<img src="VinnyPlot.png" width="640" alt="" />
<p class="caption"><em>Fig.2 - Finish time estimate plot containing all splits for Vinny Castronuovo (former Northeastern Club Running President) The actual finish time is denoted with the vertical dotted black line.</em></p>
</div>
</center>
</div>
<div id="conclusion" class="section level1">
<h1>Conclusion</h1>
<p>Scan the QR code above to access the app for this project. It contains functionality to automatically generate a finish time distribution plot given your own splits, and also allows you to view the plots of select past runners (namely, Northeastern Club Running runners that ran in 2023). This app can be used to get a better sense of uncertainty than the traditional estimates given by the BAA during the marathon.</p>
</div>
<div id="references" class="section level1 unnumbered">
<h1>References</h1>
<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-2" class="csl-entry">
Allen, Dechow, Eric J. 2014. <em>Reference-Dependent Preferences: Evidence from Marathon Runners</em>.
</div>
<div id="ref-1" class="csl-entry">
Gelman, Carlin, Andrew. 2021. <em>Bayesian Data Analysis</em>. CRC Press.
</div>
<div id="ref-3" class="csl-entry">
Kwong, &amp; Nadarajah, H. S. 2019. <em>Modelling Dynamics of Marathons – a Mixture Model Approach</em>.
</div>
</div>
</div>
</div>
</div>

</div>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
var script = document.createElement("script");
script.type = "text/javascript";
var src = "true";
if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
if (location.protocol !== "file:" && /^https?:/.test(src))
src = src.replace(/^https?:/, '');
script.src = src;
document.getElementsByTagName("head")[0].appendChild(script);
})();
</script>


</body>
</html>
